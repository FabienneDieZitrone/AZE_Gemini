#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Verhindere Commits mit Sicherheitsproblemen
echo "ğŸ” Pre-commit checks..."

# PrÃ¼fe auf PasswÃ¶rter/Keys
if grep -r "password\s*=\s*[\"'][^\"']*[\"']\|api_key\s*=\s*[\"'][^\"']*[\"']" --include="*.php" --include="*.ts" --include="*.tsx" .; then
  echo "âŒ Hardcoded passwords oder API keys gefunden!"
  exit 1
fi

# Lint TypeScript
npm run lint

# Run tests
npm test

echo "âœ… Pre-commit checks passed"